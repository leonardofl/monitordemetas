<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="utf-8">
        <title>Monitor de Metas | Transparência Hacker</title>
        <meta name="description" content="Aplicativo generico da THacker">
        <meta name="author" content="Transparência Hacker">

        <link href="vendor/css/bootstrap.min.css" rel="stylesheet">
        <link href="css/style.css" rel="stylesheet">
    </head>
    <body>
        <div class="container">
            <div class="header">
                <h1>Monitor de Metas</h1>
                <div id="infoHeader">
                    <div id="tempoAdm">Tempo de Administração <span class="highlight">115 dias (5%)</span></div>
                    <div id="nomeCidade">São Paulo</div>
                    <div id="tempoRest"><span class="highlight">1.345 dias (95%)</span> tempo restante</div>
                    <div id="busca">
                        <form id="busca-metas" class="form-search">
                            <input type="text" class="input-medium search-query"  placeholder="procure pelas metas...">
                            <button type="submit" class="btn-small">Buscar</button>
                        </form>  
                    </div>
                    <div id="prefeito">
                        <span>PREFEITO</span>
                        <span>FERNANDO HADDAD (PT)</span>
                        <a href="#">email@prefeitura.sp.gov.br</a>
                    </div>
                    <div id="downloadMetas">
                        <a href="#">Baixe aqui o arquivo oficial da prefeitura com a definição das metas</a>
                    </div>
                </div>
            </div>

            <div id="meta">
            	<div><span>Meta #1: Inserir aproximadamente 280 mil família com renda de até meio salário mínimo no Cadastro Único para atingir 773 mil família cadastradas</span></div>            	
            	<div><span>Objetivo #1: Superar a extrema pobreza na cidade de São Paulo, elevando a renda, promovendo a inclusão produtiva e o acesso a serviços...</span></div>
            	<div><span>Eixo: Compromisso com os direitos sociais e civis</span></div>
            </div>

			<div id="status">
				<hr/>
				<div><span>Status</span></div>
				<div><span>Meta cumprida: 12 votos</span></div>
				<div><span>Meta não cumprida: 2 votos</span></div>
			</div>

			<div id="votacao">
				<hr/>
				<div><span>Votar</span></div>
				<form>
					<input type="button" value="Meta cumprida!"/>
					<input type="button" value="Meta não cumprida!"/>
				</form>
			</div>

			<div id="comentarios">
				<hr/>
				<div><span>Comentários</span></div>
				<div class="comentario">
				    <p><div><span>#2 (20/05/12 - 13h43)</span></div>
					<div>Foi sim véio, eu constatei pessoalmente!</div></p>
				</div>
				<div class="comentario">
				    <p><div><span>#1 (20/05/12 - 12h05)</span></div>
					<div>Acho não-confiável a fonte que diz que a meta foi cumprida!</div></p>
				</div>
				<div>
				<form>
					<textarea rows="5" cols="100"></textarea><br/>
					<input type="button" value="Comentar"/>
				</form>				
				</div>
			</div>
        
        </div>
        <a href="https://github.com/pmarkun/monitordemetas"><img style="position: absolute; top: 0; right: 0; border: 0;" src="imgs/forkme.png" alt="Fork me on GitHub"></a>
    <script src="vendor/js/jquery-1.5.1.min.js"></script>
    <script src="vendor/js/tempo.js"></script>
    <script>
        data = {}
        $(function () {
            metas = Tempo.prepare("metas");
           console.log("Tada ima!");
           $.getJSON("data/metasaberto-sp.json", function(result) {
                metas.render(result);
                data = result;
           });
        
           $("#busca-metas button").click(function () {
                event.preventDefault();
                var search = $("#busca-metas input").val();
                $.each(data, function(index, value) {
                    if (value.meta.indexOf(search) == -1) {
                        $("#meta-"+value.meta_numero).hide("slow");
                    }
                    else {
                        $("#meta-"+value.meta_numero).show("slow");
                    };
                });
           });
        
        });
    </script>
    </body>
</html>
